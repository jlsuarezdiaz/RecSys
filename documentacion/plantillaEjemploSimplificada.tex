\input{preambuloSimple.tex}
\usepackage{float}
\usepackage{hyperref}
\usepackage{url}
\usepackage[usenames]{color}
\usepackage{subfigure}

\makeatletter
%\def\BState{\Stae\hskip-\ALG@thistlm}
\makeatother

\newcommand{\Tfrac}[2]{%
	\ooalign{%
		$\genfrac{}{}{1.2pt}1{#1}{#2}$\cr%
		$\color{white}\genfrac{}{}{.4pt}1{\phantom{#1}}{\phantom{#2}}$}%
}
\newcommand{\Dfrac}[2]{%
	\ooalign{%
		$\genfrac{}{}{1.2pt}0{#1}{#2}$\cr%
		$\color{white}\genfrac{}{}{.4pt}0{\phantom{#1}}{\phantom{#2}}$}%
}

%----------------------------------------------------------------------------------------
%	TÍTULO Y DATOS DEL ALUMNO
%----------------------------------------------------------------------------------------

\title{	
	\normalfont \normalsize 
	\textsc{{\bf Sistemas de Recuperación de Información y de Recomendación (2018-2019)} \\ Master DATCOM \\ Universidad de Granada} \\ [25pt] % Your university, school and/or department name(s)
	\horrule{0.5pt} \\[0.4cm] % Thin top horizontal rule
	\huge Sistema de Recomendación sobre películas \\ % The assignment title
	\horrule{2pt} \\[0.5cm] % Thick bottom horizontal rule
}

\author{Javier Poyatos Amador \\ Juan Luis Suárez Díaz \\  jpoyatosamador@correo.ugr.es \\ jlsuarezdiaz@correo.ugr.es \\ 76878633Y \\ DNI Juanlu} % Nombre y apellidos

\date{\normalsize\today} % Incluye la fecha actual


%----------------------------------------------------------------------------------------
%	MATEMÁTICAS
%----------------------------------------------------------------------------------------

% Paquetes para matemáticas:                     
\usepackage{amsmath, amsthm, amssymb, amsfonts, amscd} % Teoremas, fuentes y símbolos.

% Nuevo estilo para definiciones
\newtheoremstyle{definition-style} % Nombre del estilo
{5pt}                % Espacio por encima
{0pt}                % Espacio por debajo
{}                   % Fuente del cuerpo
{}                   % Identación: vacío= sin identación, \parindent = identación del parráfo
{\bf}                % Fuente para la cabecera
{.}                  % Puntuación tras la cabecera
{.5em}               % Espacio tras la cabecera: { } = espacio usal entre palabras, \newline = nueva línea
{}                   % Especificación de la cabecera (si se deja vaía implica 'normal')

% Nuevo estilo para teoremas
\newtheoremstyle{theorem-style} % Nombre del estilo
{5pt}                % Espacio por encima
{0pt}                % Espacio por debajo
{\itshape}           % Fuente del cuerpo
{}                   % Identación: vacío= sin identación, \parindent = identación del parráfo
{\bf}                % Fuente para la cabecera
{.}                  % Puntuación tras la cabecera
{.5em}               % Espacio tras la cabecera: { } = espacio usal entre palabras, \newline = nueva línea
{}                   % Especificación de la cabecera (si se deja vaía implica 'normal')

% Nuevo estilo para ejemplos y ejercicios
\newtheoremstyle{example-style} % Nombre del estilo
{5pt}                % Espacio por encima
{0pt}                % Espacio por debajo
{}                   % Fuente del cuerpo
{}                   % Identación: vacío= sin identación, \parindent = identación del parráfo
{\scshape}                % Fuente para la cabecera
{:}                  % Puntuación tras la cabecera
{.5em}               % Espacio tras la cabecera: { } = espacio usal entre palabras, \newline = nueva línea
{}                   % Especificación de la cabecera (si se deja vaía implica 'normal')

% Teoremas:
\theoremstyle{theorem-style}  % Otras posibilidades: plain (por defecto), definition, remark
\newtheorem{theorem}{Teorema}[section]  % [section] indica que el contador se reinicia cada sección
\newtheorem{corollary}[theorem]{Corolario} % [theorem] indica que comparte el contador con theorem
\newtheorem{lemma}[theorem]{Lema}
\newtheorem{proposition}[theorem]{Proposición}

% Definiciones, notas, conjeturas
\theoremstyle{definition}
\newtheorem{definition}{Definición}[section]
\newtheorem{conjecture}{Conjetura}[section]
\newtheorem*{note}{Nota} % * indica que no tiene contador

% Ejemplos, ejercicios
\theoremstyle{example-style}
\newtheorem{example}{Ejemplo}[section]
\newtheorem{exercise}{Ejercicio}[section]


%----------------------------------------------------------------------------------------
% DOCUMENTO
%----------------------------------------------------------------------------------------

\begin{document}
	
\maketitle % Muestra el Título
\newpage %inserta un salto de página

\tableofcontents % para generar el índice de contenidos


\newpage

	\section{Introducción}
	
		En esta práctica se va a desarrollar un sistema de recomendación de películas en base a diferentes características. El conjunto de datos utilizados ``The Movies Dataset`` \cite{c1}. Éste proporciona bastante información acerca de las películas como puede ser los géneros que trata, presupuesto, título y lenguaje original, entre otros. El objetivo de esta práctica consiste en realizar un sistema de recomendación en base a diferentes criterios. \\
		
		
		
	TODO : quizas una mini seccion explicando el tratamiento inicial del cjto de datos?
			
	\section{Propuestas realizadas}
	
		Las propuestas que se han llevado a cabo son las que se mencionan a continuación.
		
		\begin{itemize}
			\item \textbf{Recomendación basada en popularidad}: recomienda películas a un determinado usuario en función del número de votos y el voto medio junto con su puntuación de forma que estas películas superen un mínimo umbral de calidad.
			\item \textbf{Recomendación basada en contenido}: este sistema sugiere películas a un determinado usuario en función de aquellas de que el usuario haya visto y haya votado positivamente.
			\item \textbf{Recomendación colaborativa}: se recomienda películas a un usuario en función a otros usuarios que han visto películas similares a las que el primer usuario también ha visualizado.
			\item \textbf{Recomendación híbrida}: es una mezcla de los dos sistemas anteriores de forma que en base a un determinado usuario y a una (o varias) películas determina aquellas que pueden ser las que más le interesen a ese usuario.
		\end{itemize}	
	
	
		\subsection{Recomendación basada en popularidad}
	
			El objetivo de esta primera aproximación es simple: recomendar películas en base a una determinada métrica o sistema de puntuación. En este caso se muestran las $n$ mejores películas en función del voto medio, votos totales y de la puntuación de cada película. \\
			
			Para realizar tal tarea simplemente necesitamos saber los votos de cada película, el número de votos medio y tras ello mostramos aquellas películas que superen un determinado cuantil, que representa el mínimo número de votos que necesita una película para estar dentro de la lista de recomendaciones. Con estos dos coeficientes calculamos un peso medio para cada película que va a ser su puntuación
			
			$$ WR = \frac{v R}{v+m} + \frac{m C}{v+m} $$
			
			donde $v$ es el número de votos para cada película, $m$ es el mínimo número de votos que necesita una película para estar en las recomendaciones, $R$ es el rating medio de la película y $C$ la media de esa película en función del informe de la película. \\
			
			Un ejemplo de este primer sistema de recomendación se muestra en la Figura \ref{fig:popularity}.
			
		
		\subsection{Recomendación basada en contenido}
		
			Uno de los problemas que tiene la aproximación anterior es que distintos usuarios van a obtener la misma recomendación cuando no tiene por qué darse que a ambos les gusten las mismas películas: a uno le pueden gustar las románticas y a otro las comedias. \\
			
			El objetivo de nuestro sistema basado en contenido es personalizar la recomendación en base a las películas que el usuario haya visto y valorado positivamente. Para ello, el sistema calcula la similitud entre las películas en base a una cierta métrica y sugiere, para un determinado usuario, un número de películas acorde a sus gustos. \\
			
			Dependiendo de la métrica usada se obtendrán resultados distintos. En nuestro caso hemos fijado como métrica de similitud la métrica del coseno. Ahora bien, previo a aplicar esta métrica proponemos dos métodos de similitud de las películas: método basado en las descripciones de las películas y método basado en créditos, géneros y palabras clave.
			
			\begin{itemize}
				\item Método de similitud basado en descripciones de las películas: creamos un objeto TF-IDF según las palabras y en base a éste calculamos la similitud de las películas con el coseno.
				\item Método basado en créditos, géneros y palabras clave: con estos tres datos de nuestro conjunto de datos, creamos la matriz para calcular la similitud.
			\end{itemize}
		
		
			Una vez que hemos calculado esta métrica simplemente hemos de tomar las mejores películas según el valor para cada una de ella según la métrica para terminar mostrando las $n$ mejores. El resultado se puede ver en la Figura \ref{fig:content}.
			
		\subsection{Recomendación colaborativa}
		
			El problema que tiene el sistema anterior no puede recomendar películas de diferentes géneros ya que solamente puede recomendar películas del mismo tipo, es decir, que sean cercanas en función de la métrica. El objetivo de esta nueva aproximación es que si dos usuarios A y B han visto las películas 1 y 2 y ambos las valoran positivamente y A ve la película 3, entonces a B le puede interesar también 3. \\
			
			Para ello hemos usado dos métodos para minimizar la métrica RMSE y son SVD y KNN \cite{c2}. Lo primero que hace el sistema es tomar las películas que el usuario no ha visto y sobre ellas predecir las que les pueden interesar más. Para ello usamos el rating del restos de usuarios y el rating del propio usuario y vemos cuáles son los identificadores de películas no vistas por éste. Tras ello, localizamos el título, identificador y total de votos y votos medio de cada una de ellas para acabar calculando una estimación en función al modelo aprendido. El resultado de este nueva aproximación se muestra en la Figura \ref{fig:colaborativo}. \\
			
		
		\subsection{Recomendación híbrida}				

			Esta aproximación es una mezcla de los dos anteriores En este caso nuestra sistema va a procesar un usuario y una lista de películas. El proceso para la aproximación híbrida consiste en calcular una métrica de similitud como se expuso en el método basado en contenido y, tras ello, obtener las mejores películas que nos da esa aproximación (las $n$ mejores). A continuación, para esas películas usamos el modelo aprendido por KNN o SVD y obtenemos las predicciones.

	\section{Evaluación}
	
		
	
\begin{thebibliography}{X}
	\bibitem{c1} \url{https://www.kaggle.com/rounakbanik/the-movies-dataset}
	\bibitem{c2} \url{http://surpriselib.com/}
	\bibitem{c3} \url{https://towardsdatascience.com/evaluation-metrics-for-recommender-systems-df56c6611093}
\end{thebibliography}



\end{document}